{% extends 'event/base.html' %}

{% block content %}
<div class="event">
    <a class="btn btn-info" href="{% url 'event:player_new' pk=event.pk %}">参加者追加</a>
    <a class="btn btn-info" href="{% url 'event:result_new' pk=event.pk %}">成績を記録</a>
    <h1>{{ event.title }}</h1>
    <p>{{ request.build_absolute_uri }}</p>
    <hr>
    <h4>参加者</h4>
    {% for player in player_list %}
    <span class="player">
        <a href="{% url 'event:player_edit' event_pk=event.pk pk=player.pk %}">{{ player.name }}</a>
    </span>

    {% endfor %}
    <hr>
    <h4>成績サマリー</h4>
    {% if not result_summary.empty %}
    <table class="table table-striped">
        <thead>
        <td>内訳</td>
        {% for column in result_total.columns %}
        <td>{{ column }}</td>
        {% endfor %}
        </thead>
        <tbody>
        {% for index, row in result_total.iterrows %}
        <tr>
            <th>{{ index }}</th>
            {% for item in row %}
            <td>{{ item|floatformat }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <hr>
    <h4>すべての結果</h4>
    <table class="table table-striped">
        <thead>
        {% for column in result_summary.columns %}
        <td>{{ column }}</td>
        {% endfor %}
        <td>結果の削除</td>
        </thead>
        <tbody>
        {% for index, row in result_summary.iterrows %}
        <tr>
            {% for item in row %}
            <td>{% if item != 'nan（nan）' %} {{ item }} {% endif %}</td>
            {% endfor %}
            <th><a href="{% url 'event:game_delete' event_pk=event.pk pk=index %}">この結果を削除する</a></th>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}